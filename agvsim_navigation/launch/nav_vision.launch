<?xml version="1.0"?>
<launch>
    <!-- 设置地图的配置文件 -->
    <arg name="map" default="real_map.yaml" />
    <!-- 运行地图服务器，并且加载设置的地图-->
    <node name="map_server" pkg="map_server" type="map_server" required = "true"
        args="$(find agvsim_navigation)/maps/$(arg map)">
        <param name="frame_id" value="map"></param>
    </node>

    <!-- 启动AMCL定位节点 -->
    <include file="$(find agvsim_navigation)/launch/amcl.launch" />
    <!-- 运行rviz -->
    <node pkg="rviz" type="rviz" name="rviz"
        args="-d $(find agvsim_navigation)/rviz/navigation.rviz"
        output="screen" />
    <!-- 参数实时修改 -->
    <node pkg="rqt_reconfigure" type="rqt_reconfigure" name="rqt_reconfigure" />
    <!-- 启动局部规划器和全局规划器 -->
    <!-- <include file="$(find agvsim_navigation)/launch/move_base.launch" /> -->
    <!-- 测试 -->
    <include file="$(find agvsim_navigation)/launch/move_base_test.launch" />

    <!-- <node pkg="tf" type="static_transform_publisher" name="static_transform_publisher"
  args="0 0 0 0 0 0 1 map odom 100" /> -->

    <node pkg="robot_pose_ekf" type="robot_pose_ekf" name="robot_pose_ekf">
        <param name="output_frame" value="odom_com" />
        <param name="base_footprint_frame" value="base_footprint" />
        <param name="freq" value="300.0" />
        <param name="sensor_timeout" value="1.0" />
        <param name="odom_used" value="true" />
        <param name="imu_used" value="true" />
        <param name="vo_used" value="false" />
        <param name="topic_imu" value="/IMU_data" />
    </node>
    <include file="$(find agv_relative_move)/launch/visual_reltive_point_move.launch" />

    <include file="$(find yolo)/launch/detect.launch" />
</launch>